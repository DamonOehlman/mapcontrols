<!DOCTYPE html>
<!-- Generated with Dr.js -->
<html lang="en"><head><meta charset="utf-8"><title>zoom.js</title><link rel="stylesheet" href="dr.css"></head><body id="src-dr-js"><code id="L1"><span class="ln">1</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2"><span class="ln">2</span><span class="c"><span class="s"> * </span>zoom
</span></code><code id="L3"><span class="ln">3</span><span class="c"> [ control ]
</span></code><code id="L4"><span class="ln">4</span><span class="c"> **
</span></code><code id="L5"><span class="ln">5</span><span class="c"><span class="s"> * </span>The zoom control is used to place a zoom slider <b>in</b> the DOM element
</span></code><code id="L6"><span class="ln">6</span><span class="c"><span class="s"> * </span>specified <b>in</b> the @MapControls.add call.
</span></code><code id="L7"><span class="ln">7</span><span class="c"> **
</span></code><code id="L8"><span class="ln">8</span><span class="c"> > Options
</span></code><code id="L9"><span class="ln">9</span><span class="c"> **
</span></code><code id="L10"><span class="ln">10</span><span class="c"><span class="s"> - </span>alignment (string) the alignment string used <b>for</b> placing the control (<b>default</b>: <i>'right middle'</i>)
</span></code><code id="L11"><span class="ln">11</span><span class="c"><span class="s"> - </span>className (string) the <b>class</b> name <b>for</b> the zoom control element (<b>default</b>: `mc-zoom`)
</span></code><code id="L12"><span class="ln">12</span><span class="c"><span class="s"> - </span>min (number) the min slider value (<b>default</b>: <span class="d">1</span>)
</span></code><code id="L13"><span class="ln">13</span><span class="c"><span class="s"> - </span>max (number) the max slider value (<b>default</b>: <span class="d">17</span>)
</span></code><code id="L14"><span class="ln">14</span><span class="c"> **
</span></code><code id="L15"><span class="ln">15</span><span class="c"><span class="s"> = </span>(DOMElement) the dom element that contains the zoom slider
</span></code><code id="L16"><span class="ln">16</span><span class="c">\*/</span>
</code><code id="L17"><span class="ln">17</span>MapControls.register(<i>'zoom'</i>, <b>function</b>(opts) {
</code><code id="L18"><span class="ln">18</span>    <span class="c">// initialise <b>default</b> options</span>
</code><code id="L19"><span class="ln">19</span>    opts<span class="s"> = </span>opts<span class="s"> || </span>{};
</code><code id="L20"><span class="ln">20</span>    opts.alignment<span class="s"> = </span>opts.alignment<span class="s"> || </span><i>'right middle'</i>;
</code><code id="L21"><span class="ln">21</span>    opts.className<span class="s"> = </span>opts.className<span class="s"> || </span><i>'mc-zoom'</i>;
</code><code id="L22"><span class="ln">22</span>    opts.min<span class="s"> = </span>opts.min<span class="s"> || </span><span class="d">1</span>;
</code><code id="L23"><span class="ln">23</span>    opts.max<span class="s"> = </span>opts.max<span class="s"> || </span><span class="d">17</span>;
</code><code id="L24"><span class="ln">24</span>    
</code><code id="L25"><span class="ln">25</span>    <b>function</b> genClasses() {
</code><code id="L26"><span class="ln">26</span>        <b>var</b> output<span class="s"> = </span>[];
</code><code id="L27"><span class="ln">27</span>        <b>for</b> (<b>var</b> ii<span class="s"> = </span><span class="d">0</span>; ii &lt; arguments.length; ii++) {
</code><code id="L28"><span class="ln">28</span>            output.push(opts.className<span class="s"> + </span><i>'-'</i><span class="s"> + </span>arguments[ii]);
</code><code id="L29"><span class="ln">29</span>        }
</code><code id="L30"><span class="ln">30</span>        
</code><code id="L31"><span class="ln">31</span>        <b>return</b> output.join(<i>' '</i>);
</code><code id="L32"><span class="ln">32</span>    } <span class="c">// genClasses</span>
</code><code id="L33"><span class="ln">33</span>
</code><code id="L34"><span class="ln">34</span>    <span class="c">// initialise the zoombar element</span>
</code><code id="L35"><span class="ln">35</span>    <b>var</b> id<span class="s"> = </span><i>'zoombar_'</i><span class="s"> + </span><b>new</b> Date().getTime(),
</code><code id="L36"><span class="ln">36</span>        startY<span class="s"> = </span><span class="d">0</span>,
</code><code id="L37"><span class="ln">37</span>        zoombar<span class="s"> = </span>MapControls._createEl(<i>'div'</i>, { 
</code><code id="L38"><span class="ln">38</span>            id: id,
</code><code id="L39"><span class="ln">39</span>            className: opts.className 
</code><code id="L40"><span class="ln">40</span>        }),
</code><code id="L41"><span class="ln">41</span>        slider<span class="s"> = </span>MapControls._createEl(<i>'div'</i>, {
</code><code id="L42"><span class="ln">42</span>            className: genClasses(<i>'slider'</i>)
</code><code id="L43"><span class="ln">43</span>        });
</code><code id="L44"><span class="ln">44</span>        
</code><code id="L45"><span class="ln">45</span>    <span class="c">// add a thumb to the slider</span>
</code><code id="L46"><span class="ln">46</span>    slider.appendChild(MapControls._createEl(<i>'div'</i>, {
</code><code id="L47"><span class="ln">47</span>        className: genClasses(<i>'thumb'</i>),
</code><code id="L48"><span class="ln">48</span>        position: <i>'absolute'</i>
</code><code id="L49"><span class="ln">49</span>    }));
</code><code id="L50"><span class="ln">50</span>    
</code><code id="L51"><span class="ln">51</span>    <span class="c">// add the zoom out button</span>
</code><code id="L52"><span class="ln">52</span>    zoombar.appendChild(MapControls._createEl(<i>'div'</i>, {
</code><code id="L53"><span class="ln">53</span>        className: genClasses(<i>'btn'</i>, <i>'btn-<b>in</b>'</i>)
</code><code id="L54"><span class="ln">54</span>    }));
</code><code id="L55"><span class="ln">55</span>
</code><code id="L56"><span class="ln">56</span>    <span class="c">// add the slider</span>
</code><code id="L57"><span class="ln">57</span>    zoombar.appendChild(slider);
</code><code id="L58"><span class="ln">58</span>    
</code><code id="L59"><span class="ln">59</span>    <span class="c">// add the zoom <b>in</b> button</span>
</code><code id="L60"><span class="ln">60</span>    zoombar.appendChild(MapControls._createEl(<i>'div'</i>, {
</code><code id="L61"><span class="ln">61</span>        className: genClasses(<i>'btn'</i>, <i>'btn-out'</i>)
</code><code id="L62"><span class="ln">62</span>    }));
</code><code id="L63"><span class="ln">63</span>    
</code><code id="L64"><span class="ln">64</span>    <span class="c">// watch the zoombar</span>
</code><code id="L65"><span class="ln">65</span>    INTERACT.watch(zoombar, {
</code><code id="L66"><span class="ln">66</span>        aggressiveCapture: opts.aggressiveCapture
</code><code id="L67"><span class="ln">67</span>    });
</code><code id="L68"><span class="ln">68</span>    
</code><code id="L69"><span class="ln">69</span>    eve.on(<i>'interact.pointer.down.'</i><span class="s"> + </span>id, <b>function</b>(evt, absXY, relXY) {
</code><code id="L70"><span class="ln">70</span>        startY<span class="s"> = </span>relXY.y;
</code><code id="L71"><span class="ln">71</span>
</code><code id="L72"><span class="ln">72</span>        evt.preventDefault();
</code><code id="L73"><span class="ln">73</span>        evt.stopPropagation();
</code><code id="L74"><span class="ln">74</span>        evt.stopImmediatePropagation();
</code><code id="L75"><span class="ln">75</span>    });
</code><code id="L76"><span class="ln">76</span>
</code><code id="L77"><span class="ln">77</span>    eve.on(<i>'interact.pointer.move.'</i><span class="s"> + </span>id, <b>function</b>(evt, absXY, relXY, deltaXY) {
</code><code id="L78"><span class="ln">78</span>        <b>var</b> diffY<span class="s"> = </span>relXY.y<span class="s"> - </span>startY;
</code><code id="L79"><span class="ln">79</span>        
</code><code id="L80"><span class="ln">80</span>        console.log(diffY);
</code><code id="L81"><span class="ln">81</span>    });
</code><code id="L82"><span class="ln">82</span>    
</code><code id="L83"><span class="ln">83</span>    <span class="c">// <b>return</b> the zoombar</span>
</code><code id="L84"><span class="ln">84</span>    <b>return</b> zoombar;
</code><code id="L85"><span class="ln">85</span>});
</code></body></html>